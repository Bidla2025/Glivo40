<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>التحقق - GLIVO4</title>
<style>
body {margin:0;padding:0;font-family: system-ui,Segoe UI,Roboto,Arial;background: linear-gradient(135deg,#0a0f2b,#001f4d);color:#f0f0f0;overflow-x:hidden;}
.bg-shape {position:absolute;width:200px;height:200px;background: rgba(14,165,233,0.2);border-radius:50%;animation: float 10s infinite ease-in-out;}
.bg-shape:nth-child(1){top:50px;left:-50px;}
.bg-shape:nth-child(2){bottom:100px;right:-80px;animation-duration:12s;}
.bg-shape:nth-child(3){top:200px;right:50px;animation-duration:15s;}
@keyframes float{0%,100%{transform:translateY(0) rotate(0deg);}50%{transform:translateY(50px) rotate(180deg);}}
.container{max-width:520px;margin:60px auto 40px;padding:20px;background: rgba(0,0,0,0.7);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.6);position: relative; z-index:1;text-align:center;}
.container img{width:100%;border-radius:12px;margin-bottom:16px;border:2px solid #0ea5e9;}
.notice{font-size:16px;color:#c0f0ff;margin-bottom:20px;}
.option-card{display:flex;justify-content:space-between;align-items:center;background: rgba(14,165,233,0.1);padding:14px 16px;margin:10px 0;border-radius:12px;cursor:pointer;transition:0.3s;position: relative;}
.option-card:hover{background: rgba(14,165,233,0.25);}
.option-card span{font-size:16px;font-weight:600;}
.option-card a, .option-card button{padding:10px 16px;background:#0ea5e9;color:#fff;text-decoration:none;font-weight:700;border-radius:12px;transition:0.3s;border:none;cursor:pointer;}
.option-card a:hover, .option-card button:hover{background:#0284c7;}
.option-card .done-message{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,128,0,0.8);padding:8px 12px;border-radius:8px;font-weight:700;display:none;}
.back-btn{display:block;width:50%;margin:20px auto 0;padding:12px;background:#64748b;color:#fff;text-decoration:none;border-radius:12px;font-weight:600;transition:0.3s;}
.back-btn:hover{background:#475569;}
</style>
</head>
<body>

<div class="bg-shape"></div>
<div class="bg-shape"></div>
<div class="bg-shape"></div>

<div class="container">
  <img src="https://b.top4top.io/p_3527v0mnh1.png" alt="Banner">
  <div class="notice">أكمل العروض ليتم شحن مكافأتك في حسابك</div>

  <div id="offers"></div>

  <a href="index.html" class="back-btn">الرجوع للموقع الرئيسي</a>
</div>

<script>
// دالة لتحديد الجهاز
function getDevice() {
  const ua = navigator.userAgent;
  if (/android/i.test(ua)) return "Android";
  if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) return "iOS";
  return "Desktop";
}

// مصفوفة العروض الجديدة
const newOffers = [
  {type:"youtube", text:"اشترك في قناتنا على يوتيوب", url:"https://www.youtube.com/channel/EXAMPLE"},
  {type:"facebook", text:"شارك الموقع على مجموعات فيسبوك للحصول على المكافأة"},
  {type:"geo", text:"أكمل العرضا لاخير للحصول على المكافأة"} // العرض الأصلي
];

// مصفوفة الروابط حسب الدولة والجهاز (العرض الأصلي)
const offerList = [
  {country:"US", device:"Android", url:"https://singingfiles.com/show.php?l=0&u=2442584&id=68831"},
  {country:"US", device:"Android", url:"https://singingfiles.com/show.php?l=0&u=2442584&id=67655"},
  {country:"US", device:"Android", url:"https://singingfiles.com/show.php?l=0&u=2442584&id=71677"},
  {country:"US", device:"iOS", url:"https://singingfiles.com/show.php?l=0&u=2442584&id=71678"},
  {country:"US", device:"Desktop", url:"https://singingfiles.com/show.php?l=0&u=2442584&id=67669"},
  // ... أكمل باقي الدول كما في الكود الأصلي
];

const fallbackUrl = "https://otieu.com/4/9768535";

// دوال العروض الخاصة
function openYoutubeOffer(url, card){
  window.open(url, "_blank");
  startCountdown(card, "newOffer1");
}

function shareFacebookOffer(card){
  const pageUrl = encodeURIComponent("https://example.com"); // رابط الموقع
  const fbUrl = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`;
  window.open(fbUrl, "_blank", "width=600,height=400");
  startCountdown(card, "newOffer2");
}

// عد تنازلي بعد اكتمال العرض
function startCountdown(card, key){
  let countdown = 3; // ثواني قبل ظهور تم
  const message = document.createElement("div");
  message.className="done-message";
  message.style.display="block";
  message.textContent = `تم! (${countdown})`;
  card.appendChild(message);

  const interval = setInterval(()=>{
    countdown--;
    message.textContent = `تم! (${countdown})`;
    if(countdown<=0){
      clearInterval(interval);
      message.textContent = "تم!";
      localStorage.setItem(key,"done");
    }
  },1000);
}

async function showOffer() {
  const device = getDevice();
  let country = null;
  try {
    const response = await fetch('https://ipapi.co/json/');
    const data = await response.json();
    country = data.country;
  } catch(err) {
    console.log(err);
  }

  const offersDiv = document.getElementById("offers");

  // العرض الأول: YouTube
  const div1 = document.createElement("div");
  div1.className="option-card";
  if(localStorage.getItem("newOffer1")==="done"){
    div1.innerHTML=`<span>${newOffers[0].text}</span><div class="done-message" style="display:block">تم!</div>`;
  } else {
    div1.innerHTML=`<span>${newOffers[0].text}</span><button onclick="openYoutubeOffer('${newOffers[0].url}', this.parentElement)">اذهب الآن</button>`;
  }
  offersDiv.appendChild(div1);

  // العرض الثاني: Facebook Share
  const div2 = document.createElement("div");
  div2.className="option-card";
  if(localStorage.getItem("newOffer2")==="done"){
    div2.innerHTML=`<span>${newOffers[1].text}</span><div class="done-message" style="display:block">تم!</div>`;
  } else {
    div2.innerHTML=`<span>${newOffers[1].text}</span><button onclick="shareFacebookOffer(this.parentElement)">شارك الآن</button>`;
  }
  offersDiv.appendChild(div2);

  // العرض الثالث: العرض الأصلي
  let matched = offerList.filter(o => o.device === device && o.country === country);
  if(matched.length===0){
    offersDiv.innerHTML += `<div class="option-card">
      <span>${newOffers[2].text}</span>
      <a href="${fallbackUrl}" target="_blank">ابدأ الآن</a>
    </div>`;
  } else {
    matched.forEach(o=>{
      const div = document.createElement("div");
      div.className="option-card";
      div.innerHTML=`<span>${newOffers[2].text}</span><a href="${o.url}" target="_blank">ابدأ الآن</a>`;
      offersDiv.appendChild(div);
    });
  }
}

showOffer();
</script>

</body>
</html>

